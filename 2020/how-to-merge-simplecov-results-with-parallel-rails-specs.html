<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How to merge SimpleCov results with parallel Rails specs on Semaphore CI</title>
  <meta name="description" content="If you are running Rails specs on parallel machines with Knapsack Pro, one challenge you will run into is combining the code coverage results generated by Si...">

  <meta property="og:title" content="How to merge SimpleCov results with parallel Rails specs on Semaphore CI">
  <meta name="twitter:title" content="How to merge SimpleCov results with parallel Rails specs on Semaphore CI">
  <meta name="twitter:description" content="If you are running Rails specs on parallel machines with Knapsack Pro, one challenge you will run into is combining the code coverage results generated by Si...">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@KnapsackPro">

  
  <meta property="og:image" content="https://docs.knapsackpro.com/images/blog/posts/how-to-merge-simplecov-results-with-parallel-rails-specs/logo.png">
  <meta name="twitter:image" content="https://docs.knapsackpro.com/images/blog/posts/how-to-merge-simplecov-results-with-parallel-rails-specs/logo.png">
  

  <link rel="shortcut icon" href="/images/favicon.ico" />
  <link rel="stylesheet" href="/css/main.css?version=1">
  <link rel="canonical" href="https://docs.knapsackpro.com/2020/how-to-merge-simplecov-results-with-parallel-rails-specs">
  <link rel="alternate" type="application/rss+xml" title="Blog about testing & documentation for KnapsackPro.com" href="https://docs.knapsackpro.com/feed.xml" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:100,200,300,400,600,700&amp;subset=latin,latin-ext" type="text/css" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
</head>


  <body>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JPGP34N3JJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JPGP34N3JJ');
</script>


    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1803263473334711'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1803263473334711&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="https://knapsackpro.com/" rel="nofollow noopener" target="_blank">
      <img src="/images/logo.png" alt="Knapsack Pro Documentation" width="32" height="32">
      Knapsack Pro&nbsp;
    </a>
    <a class="site-title" href="/integration">
      <strong>Docs</strong>
    </a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/">Blog</a>
        <a class="page-link" href="/integration/">Get started with integration</a>
        <a class="page-link" href="/api/">API</a>
        <a class="page-link" href="https://knapsackpro.com">Sign up</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <script>
$(document).ready(function() {
  if (document.cookie.includes("u_source")) {
    return;
  };

  var date = new Date();
  date.setMonth(date.getMonth() + 6);
  var dateString = date.toUTCString();
  var cookieAttributesString = "path=/;domain=knapsackpro.com;expires=" + dateString + ";";
  var utmCampaignString = document.location.pathname.substring(6);

  document.cookie = "u_source=docs_knapsackpro;" + cookieAttributesString;
  document.cookie = "u_medium=blog_post;" + cookieAttributesString;
  document.cookie = "u_campaign=" + utmCampaignString + ";" + cookieAttributesString;
  document.cookie = "u_content=blog_post_pageview;" + cookieAttributesString;
});
</script>


<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">How to merge SimpleCov results with parallel Rails specs on Semaphore CI</h1>
    <p class="post-meta">
    <time datetime="2020-11-05T21:00:00+00:00" itemprop="datePublished">Nov 5, 2020</time>
     • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jesal Gadhia</span></span>
    
    </p>
  </header>

  <div class="share-post-container">
  <div class="share-post-left">
    <div class="fb-share-button" data-href="https://docs.knapsackpro.com/2020/how-to-merge-simplecov-results-with-parallel-rails-specs" data-layout="button_count" data-mobile-iframe="true"></div>

    <a href="https://twitter.com/share" class="twitter-share-button" data-via="KnapsackPro" data-hashtags="">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>

  <div class="share-post-right">
    <a href="https://twitter.com/KnapsackPro" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @KnapsackPro</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>
</div>


  <div class="post-content" itemprop="articleBody">
    <p>If you are running <a href="/2020/how-to-speed-up-ruby-and-javascript-tests-with-ci-parallelisation">Rails specs on parallel machines with Knapsack Pro</a>, one challenge you will run into is combining the code coverage results generated by SimpleCov.</p>

<p><img src="/images/blog/posts/how-to-merge-simplecov-results-with-parallel-rails-specs/logo.png" style="width:150px;margin-right: 15px;float:left;" alt="SimpleCov, SemaphoreCI, Knapsack Pro" /></p>

<p><br />
This post will show you how to generate a report of the total combined code coverage after all the tests have executed. Here’s what the pipeline diagram looks like at a high level with unrelated sections blurred out:</p>

<p><img src="/images/blog/posts/how-to-merge-simplecov-results-with-parallel-rails-specs/pipeline_diagram.png" alt="Pipeline Diagram" /></p>

<h2 id="configure"><strong>Configure</strong></h2>

<h3 id="simplecov">SimpleCov</h3>

<p>First lets look at the config file used for SimpleCov below. Note no <code class="language-plaintext highlighter-rouge">minimum_coverage</code> configuration for failing the build. This is because each node most likely will not meet the minimum coverage threshold on its own so it could lead to the build failing erroneously.</p>

<p>Also note, <a href="https://knapsackpro.com/faq/question/what-hooks-are-supported-in-queue-mode"><code class="language-plaintext highlighter-rouge">before_queue</code> hook for Knapsack Pro</a>. This is the important piece, it will set a command name based on the CI node index so that the results are recorded against it.</p>

<p><code class="language-plaintext highlighter-rouge">.simplecov</code>:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">SimpleCov</span><span class="p">.</span><span class="nf">start</span> <span class="k">do</span>
  <span class="n">add_filter</span> <span class="sr">%r{^/config/}</span>
  <span class="n">add_filter</span> <span class="sr">%r{^/db/}</span>
  <span class="n">add_filter</span> <span class="sr">%r{^/spec/}</span>

  <span class="n">add_group</span> <span class="s1">'Admin'</span><span class="p">,</span> <span class="s1">'app/admin'</span>
  <span class="n">add_group</span> <span class="s1">'Controllers'</span><span class="p">,</span> <span class="s1">'app/controllers'</span>
  <span class="n">add_group</span> <span class="s1">'Helpers'</span><span class="p">,</span> <span class="s1">'app/helpers'</span>
  <span class="n">add_group</span> <span class="s1">'Jobs'</span><span class="p">,</span> <span class="s1">'app/jobs'</span>
  <span class="n">add_group</span> <span class="s1">'Libraries'</span><span class="p">,</span> <span class="s1">'lib/'</span>
  <span class="n">add_group</span> <span class="s1">'Mailers'</span><span class="p">,</span> <span class="s1">'app/mailers'</span>
  <span class="n">add_group</span> <span class="s1">'Models'</span><span class="p">,</span> <span class="s1">'app/models'</span>
  <span class="n">add_group</span> <span class="s1">'Policies'</span><span class="p">,</span> <span class="s1">'app/policies'</span>
  <span class="n">add_group</span> <span class="s1">'Serializers'</span><span class="p">,</span> <span class="s1">'app/serializers'</span>
<span class="k">end</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">eager_load!</span>

<span class="no">KnapsackPro</span><span class="o">::</span><span class="no">Hooks</span><span class="o">::</span><span class="no">Queue</span><span class="p">.</span><span class="nf">before_queue</span> <span class="k">do</span>
  <span class="no">SimpleCov</span><span class="p">.</span><span class="nf">command_name</span><span class="p">(</span><span class="s2">"rspec_ci_node_</span><span class="si">#{</span><span class="no">KnapsackPro</span><span class="o">::</span><span class="no">Config</span><span class="o">::</span><span class="no">Env</span><span class="p">.</span><span class="nf">ci_node_index</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>So now when SimpleCov creates a <code class="language-plaintext highlighter-rouge">.resultset.json</code> it will have a specific key depending on which CI node it was run in like the example below. This will be useful down the line when it comes to combining the results.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"rspec_ci_node_0"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"rspec_ci_node_1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">...</span></code></pre></figure>

<h3 id="semaphore-ci">Semaphore CI</h3>

<p>Below is the relevant portions of the Semaphore CI configuration. It runs the Rails tests and then uploads the coverage results as a Semaphore workflow artifact. After all the parallel tests have completed, it will run a job to collate the coverage results from all the machines.</p>

<p><code class="language-plaintext highlighter-rouge">.semaphore/semaphore.yml</code>:</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Rails</span><span class="nv"> </span><span class="s">Tests"</span>
    <span class="na">task</span><span class="pi">:</span>
      <span class="na">jobs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Rails</span>
          <span class="na">parallelism</span><span class="pi">:</span> <span class="m">10</span>
          <span class="na">commands</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">./.semaphore/helpers/rails_tests.sh</span>
      <span class="na">epilogue</span><span class="pi">:</span>
        <span class="na">always</span><span class="pi">:</span>
          <span class="na">commands</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">./.semaphore/helpers/upload_test_artifacts.sh</span>
      <span class="na">secrets</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">docker-hub</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">knapsack-pro-rails</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Code</span><span class="nv"> </span><span class="s">Coverage"</span>
  <span class="na">dependencies</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">Rails</span><span class="nv"> </span><span class="s">Tests"</span><span class="pi">]</span>
  <span class="na">task</span><span class="pi">:</span>
    <span class="na">env_vars</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SEMAPHORE_RAILS_JOB_COUNT</span>
        <span class="na">value</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10"</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Collate Results</span>
        <span class="na">commands</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">./.semaphore/helpers/calc_code_coverage.sh</span>
    <span class="na">secrets</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">docker-hub</span></code></pre></figure>

<p>Below is the bash file which executes the Rails tests on each parallel machine. It sets up the Rails environment and then runs <a href="/2019/run-parallel-jobs-on-semaphore-ci-2-0-to-get-faster-ci-build-time">Knapsack Pro in Queue Mode</a>.</p>

<p><code class="language-plaintext highlighter-rouge">.semaphore/helpers/rails_tests.sh</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

docker-compose <span class="nt">-f</span> docker-compose.semaphore.yml <span class="nt">--no-ansi</span> run <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">KNAPSACK_PRO_TEST_FILE_PATTERN</span><span class="o">=</span><span class="s2">"spec/**/*_spec.rb"</span> <span class="se">\</span>
  ci bash <span class="nt">-c</span> <span class="s2">"bin/rake ci:setup db:create db:structure:load knapsack_pro:queue:rspec['--no-color --format progress --format RspecJunitFormatter --out tmp/rspec-junit/rspec.xml']"</span></code></pre></figure>

<p>If you want you can also learn <a href="https://knapsackpro.com/faq/question/how-to-use-junit-formatter">how to use RspecJunitFormatter with KnapsackPro Queue Mode</a>.</p>

<p>This is the bash file which is responsible for uploading the SimpleCov results from each machine. It compresses the coverage directory and uploads it to Semaphore.</p>

<p><code class="language-plaintext highlighter-rouge">.semaphore/helpers/upload_test_artifacts.sh</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"tmp/rspec-junit"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Pushing rspec junit results"</span>
  artifact push job tmp/rspec-junit <span class="nt">--destination</span> semaphore/test-results/
<span class="k">fi

if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"coverage"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"Pushing simplecov results"</span>
  <span class="nb">tar </span>czf coverage_<span class="k">${</span><span class="nv">SEMAPHORE_JOB_INDEX</span><span class="k">}</span>.tgz <span class="nt">-C</span> coverage <span class="nb">.</span>
  artifact push workflow coverage_<span class="k">${</span><span class="nv">SEMAPHORE_JOB_INDEX</span><span class="k">}</span>.tgz
<span class="k">fi</span></code></pre></figure>

<p>Lastly, this is the bash file for collating all the results from Semaphore. It will download the coverage artifacts from each parallel machine and run a rake task which will collate them and then upload the results into a combined <code class="language-plaintext highlighter-rouge">total_coverage.tgz</code> file as shown below:</p>

<p><code class="language-plaintext highlighter-rouge">.semaphore/helpers/calc_code_coverage.sh</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">eval echo</span> <span class="s2">"{1..</span><span class="nv">$SEMAPHORE_RAILS_JOB_COUNT</span><span class="s2">}"</span><span class="si">)</span><span class="p">;</span> <span class="k">do
  </span>artifact pull workflow coverage_<span class="nv">$i</span>.tgz<span class="p">;</span>
  <span class="nb">mkdir </span>coverage_<span class="nv">$i</span>
  <span class="nb">tar</span> <span class="nt">-xzf</span> coverage_<span class="nv">$i</span>.tgz <span class="nt">-C</span> coverage_<span class="nv">$i</span>
<span class="k">done

</span>docker-compose <span class="nt">-f</span> docker-compose.semaphore.yml <span class="nt">--no-ansi</span> run ci bash <span class="nt">-c</span> <span class="s2">"bin/rake coverage:report"</span>
<span class="nb">tar </span>czf total_coverage.tgz <span class="nt">-C</span> coverage <span class="nb">.</span>
artifact push workflow total_coverage.tgz</code></pre></figure>

<p>This <code class="language-plaintext highlighter-rouge">coverage:report</code> rake task will simply call <code class="language-plaintext highlighter-rouge">SimpleCov.collate</code> which will go through the coverage results in each folder and combine them into a single <code class="language-plaintext highlighter-rouge">.resultset.json</code> shown below</p>

<p><code class="language-plaintext highlighter-rouge">lib/task/coverage_report.rake</code>:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">namespace</span> <span class="ss">:coverage</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s1">'Collates all result sets generated by the different test runners'</span>
  <span class="n">task</span> <span class="ss">report: :environment</span> <span class="k">do</span>
    <span class="nb">require</span> <span class="s1">'simplecov'</span>

    <span class="no">SimpleCov</span><span class="p">.</span><span class="nf">collate</span> <span class="no">Dir</span><span class="p">[</span><span class="s1">'coverage_*/.resultset.json'</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">.resultset.json</code>:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"rspec_ci_node_0, rspec_ci_node_1, rspec_ci_node_2, rspec_ci_node_3, rspec_ci_node_4, rspec_ci_node_5, rspec_ci_node_6, rspec_ci_node_7, rspec_ci_node_8, rspec_ci_node_9"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"coverage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="summary">Summary</h2>

<p>Finally here’s what your Semaphore workflow artifacts will look like. It will have a compressed coverage file generated on each machine and a total coverage file that we created at the very end:</p>

<p><img src="/images/blog/posts/how-to-merge-simplecov-results-with-parallel-rails-specs/workflow_artifacts.png" alt="Workflow Artifacts" /></p>

<p>This approach can also be easily ported over to other CI providers by simply changing the <code class="language-plaintext highlighter-rouge">artifact push</code> and <code class="language-plaintext highlighter-rouge">artifact pull</code> commands to S3 or another CI specific artifact upload command.</p>

<p>I hope this article was useful to you. Let me know if you have any questions or feedback. If you liked this post, please share it on social media and <a href="https://twitter.com/jesalg" rel="nofollow noopener" target="_blank">follow me on Twitter!</a></p>

  </div>

  <div class="share-post-container">
  <div class="share-post-left">
    <div class="fb-share-button" data-href="https://docs.knapsackpro.com/2020/how-to-merge-simplecov-results-with-parallel-rails-specs" data-layout="button_count" data-mobile-iframe="true"></div>

    <a href="https://twitter.com/share" class="twitter-share-button" data-via="KnapsackPro" data-hashtags="">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>

  <div class="share-post-right">
    <a href="https://twitter.com/KnapsackPro" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @KnapsackPro</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>
</div>


  


  <div>
  <div id="disqus_thread"></div>
  <script>
  /**
  * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  /*
  var disqus_config = function () {
  this.page.url = "https://docs.knapsackpro.com/2020/how-to-merge-simplecov-results-with-parallel-rails-specs"; // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = "https://docs.knapsackpro.com/2020/how-to-merge-simplecov-results-with-parallel-rails-specs"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//knapsackpro.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Blog about testing & documentation for KnapsackPro.com</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Found a typo? Want to contribute?</li>
          <li><a href="https://github.com/KnapsackPro/docs.knapsackpro.com">Source Code of this site</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li><i class="fab fa-youtube"></i> <a href="https://www.youtube.com/c/ArturTrzop" rel="nofollow noopener" target="_blank" class="page-link">Testing tips</a></li>
          <li><i class="fab fa-twitter"></i> <a href="https://twitter.com/KnapsackPro" rel="nofollow noopener" target="_blank" class="page-link">Follow us on Twitter</a></li>
          <li><i class="fab fa-facebook-square"></i> <a href="https://www.facebook.com/KnapsackPro" rel="nofollow noopener" target="_blank" class="page-link">Like our Fanpage</a></li>
          <li><i class="fab fa-linkedin"></i> <a href="https://www.linkedin.com/company/knapsackpro/" rel="nofollow noopener" target="_blank" class="page-link">Follow us on LinkedIn</a></li>
          <li><i class="fab fa-github"></i> <a href="https://github.com/KnapsackPro" rel="nofollow noopener" target="_blank" class="page-link">GitHub</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p class="text">Speed up your tests with optimal test suite parallelisation on your CI. Blog & documentation for Knapsack Pro.</p>
      </div>
    </div>

    <div class="footer-copy">
      &copy; 2015 - 2022 <a href="https://knapsackpro.com">KnapsackPro.com</a>
    </div>

  </div>

</footer>

    <style>
  #js-cookies-message{padding: 0.5rem 1rem; display: none; opacity: 90%; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #efefef;}
  #js-cookies-message button {cursor: pointer; border-radius: 10px; padding: 10px 20px; background-color: #0864cf; color: #fff; border: 0;}
  #js-cookies-message button:hover {background-color: #5e8fc8;}
</style>

<div id="js-cookies-message">
  <p>
    This site uses cookies. By staying here you accept them. See our <a href="https://knapsackpro.com/cookies", target="_blank">Cookie Policy</a> for details.<br>
    For more information on how to turn off the use of cookies, please <a href="https://knapsackpro.com/cookies#turning-off-cookies", target="_blank">see this</a>.<br>
    To refuse the use of cookies, please leave the page (more details <a href="https://knapsackpro.com/cookies#withdrawing-consent", target="_blank">here</a>).
  </p>
  <p>
    <a href="#" class="btn btn-primary" id="js-cookies-close"><button>I Agree</button></a>
  </p>
</div>

<script>
  $(document).ready(function() {
    var cookieName = 'cookies_consent_docs'

    if (document.cookie.includes(cookieName)) {
      // no-op
    } else {
      document.getElementById('js-cookies-message').style.display = 'block';
    };

    $("#js-cookies-close").click(function(e) {
      e.preventDefault()

      $("#js-cookies-message").fadeOut()

      var date = new Date();
      date.setMonth(date.getMonth() + 12);
      var dateString = date.toUTCString();

      document.cookie = cookieName + "=true;expires=" + dateString + ";path=/"

      gtag('event', 'Cookie consent - I agree', {});
    });
  });
</script>

  </body>

</html>
