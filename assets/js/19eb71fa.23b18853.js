"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[75],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),s=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},_=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),_=s(a),d=r,k=_["".concat(i,".").concat(d)]||_[d]||u[d]||l;return a?n.createElement(k,p(p({ref:t},c),{},{components:a})):n.createElement(k,p({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,p=new Array(l);p[0]=_;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,p[1]=o;for(var s=2;s<l;s++)p[s]=a[s];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}_.displayName="MDXCreateElement"},7644:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>p,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const l={pagination_next:null,pagination_prev:null,toc_max_heading_level:2},p="Reference",o={unversionedId:"ruby/reference",id:"ruby/reference",title:"Reference",description:"Command-line arguments",source:"@site/docs/ruby/reference.md",sourceDirName:"ruby",slug:"/ruby/reference",permalink:"/ruby/reference",draft:!1,editUrl:"https://github.com/KnapsackPro/docs.knapsackpro.com/tree/main/docusaurus/docs/ruby/reference.md",tags:[],version:"current",frontMatter:{pagination_next:null,pagination_prev:null,toc_max_heading_level:2},sidebar:"sidebar"},i={},s=[{value:"Command-line arguments",id:"command-line-arguments",level:2},{value:"<code>KNAPSACK_PRO_LOG_LEVEL</code>",id:"knapsack_pro_log_level",level:2},{value:"Related FAQs",id:"related-faqs",level:3},{value:"<code>KNAPSACK_PRO_LOG_DIR</code>",id:"knapsack_pro_log_dir",level:2},{value:"Related FAQs",id:"related-faqs-1",level:3},{value:"<code>KNAPSACK_PRO_TEST_FILE_PATTERN</code>",id:"knapsack_pro_test_file_pattern",level:2},{value:"Related FAQs",id:"related-faqs-2",level:3},{value:"<code>KNAPSACK_PRO_TEST_DIR</code> (RSpec)",id:"knapsack_pro_test_dir-rspec",level:2},{value:"Related FAQs",id:"related-faqs-3",level:3},{value:"<code>KNAPSACK_PRO_TEST_DIR</code> (Cucumber)",id:"knapsack_pro_test_dir-cucumber",level:2},{value:"Related FAQs",id:"related-faqs-4",level:3},{value:"<code>KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN</code>",id:"knapsack_pro_test_file_exclude_pattern",level:2},{value:"Related FAQs",id:"related-faqs-5",level:3},{value:"<code>KNAPSACK_PRO_TEST_FILE_LIST</code>",id:"knapsack_pro_test_file_list",level:2},{value:"Related FAQs",id:"related-faqs-6",level:3},{value:"<code>KNAPSACK_PRO_TEST_FILE_LIST_SOURCE_FILE</code>",id:"knapsack_pro_test_file_list_source_file",level:2},{value:"Related FAQs",id:"related-faqs-7",level:3},{value:"<code>KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES</code> (RSpec)",id:"knapsack_pro_rspec_split_by_test_examples-rspec",level:2},{value:"Related FAQs",id:"related-faqs-8",level:3}],c={toc:s};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"reference"},"Reference"),(0,r.kt)("h2",{id:"command-line-arguments"},"Command-line arguments"),(0,r.kt)("p",null,"You can pass command-line arguments to Knapsack Pro using the Rake argument syntax:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'bundle exec rake "knapsack_pro:rspec[--tag focus --profile]"\n# ==\nbundle exec rake rspec --tag focus --profile\n')),(0,r.kt)("p",null,"Or using the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/KnapsackPro/knapsack_pro-ruby#knapsack-pro-binary"},(0,r.kt)("inlineCode",{parentName:"a"},"knapsack_pro")," binary"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'knapsack_pro rspec "--tag focus --profile"\n# ==\nbundle exec rake rspec --tag focus --profile\n')),(0,r.kt)("h2",{id:"knapsack_pro_log_level"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_LOG_LEVEL")),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"debug")),(0,r.kt)("p",null,"Available: ",(0,r.kt)("inlineCode",{parentName:"p"},"debug")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"info")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"warn")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," | ",(0,r.kt)("inlineCode",{parentName:"p"},"fatal")),(0,r.kt)("p",null,"Recommended: ",(0,r.kt)("inlineCode",{parentName:"p"},"debug")," when debugging issues, ",(0,r.kt)("inlineCode",{parentName:"p"},"info")," to know what Knapsack Pro is doing"),(0,r.kt)("h3",{id:"related-faqs"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-can-i-change-log-level"},"How can I change log level?"))),(0,r.kt)("h2",{id:"knapsack_pro_log_dir"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_LOG_DIR")),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"stdout")),(0,r.kt)("p",null,"Available: ",(0,r.kt)("inlineCode",{parentName:"p"},"stdout")," | directory"),(0,r.kt)("p",null,"When ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_LOG_DIR=log"),", Knapsack Pro will write logs to the ",(0,r.kt)("inlineCode",{parentName:"p"},"log")," directory and append the CI node index to the name. For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"log/knapsack_pro_node_0.log")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"log/knapsack_pro_node_1.log"))),(0,r.kt)("h3",{id:"related-faqs-1"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-write-knapsack_pro-logs-to-a-file"},"How to write ",(0,r.kt)("inlineCode",{parentName:"a"},"knapsack_pro")," logs to a file?"))),(0,r.kt)("h2",{id:"knapsack_pro_test_file_pattern"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_FILE_PATTERN")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Make sure to match individual files by adding the suffix (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"_spec.rb"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"_test.rb"),") so that Knapsack Pro can split by file and not by directory.")),(0,r.kt)("p",null,"Run tests matching a pattern. It can be used in tandem with ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN"),"."),(0,r.kt)("p",null,"Default: all tests for the given test runner"),(0,r.kt)("p",null,"Available: anything that ",(0,r.kt)("a",{parentName:"p",href:"https://ruby-doc.org/core-3.0.0/Dir.html#method-c-glob"},"Dir.glob")," accepts"),(0,r.kt)("p",null,"Hint: you can debug ",(0,r.kt)("inlineCode",{parentName:"p"},"Dir.glob(MY_GLOB)")," in irb or rails console"),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'KNAPSACK_PRO_TEST_FILE_PATTERN="spec/system/**/*_spec.rb"\n\nKNAPSACK_PRO_TEST_DIR=spec KNAPSACK_PRO_TEST_FILE_PATTERN="{spec,engines/*/spec}/**/*_spec.rb"\n\nKNAPSACK_PRO_TEST_FILE_PATTERN="spec/controllers/**{,/*/**}/*_spec.rb" \\\nKNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN="spec/controllers/admin/**{,/*/**}/*_spec.rb"\n')),(0,r.kt)("h3",{id:"related-faqs-2"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-run-tests-from-a-specific-directory-only-system-tests-or-features-specs"},"How to run tests from a specific directory (only system tests or features specs)?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-can-i-run-tests-from-multiple-directories"},"How can I run tests from multiple directories?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-exclude-tests-from-running-them"},"How to exclude tests?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/dir-glob-pattern-examples-for-knapsack_pro_test_file_pattern-and-knapsack_pro_test_file_exclude_pattern"},"Dir.glob pattern examples for ",(0,r.kt)("inlineCode",{parentName:"a"},"KNAPSACK_PRO_TEST_FILE_PATTERN")," and ",(0,r.kt)("inlineCode",{parentName:"a"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN")))),(0,r.kt)("h2",{id:"knapsack_pro_test_dir-rspec"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_DIR")," (RSpec)"),(0,r.kt)("p",null,"Passed as-is to RSpec's ",(0,r.kt)("a",{parentName:"p",href:"https://relishapp.com/rspec/rspec-core/v/3-0/docs/configuration/setting-the-default-spec-path"},(0,r.kt)("inlineCode",{parentName:"a"},"--default-path")),"."),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"rspec")),(0,r.kt)("p",null,"Available: any folder relative to the root of your project that contains ",(0,r.kt)("inlineCode",{parentName:"p"},"spec_helper.rb")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'KNAPSACK_PRO_TEST_DIR=spec KNAPSACK_PRO_TEST_FILE_PATTERN="{spec,engines/*/spec}/**/*_spec.rb"\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"You may need to make your test files require ",(0,r.kt)("inlineCode",{parentName:"p"},"spec_helper")," with:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"require_relative 'spec_helper' # \u2705 Good\n\nrequire 'spec_helper' # \u26d4\ufe0f Bad\n"))),(0,r.kt)("h3",{id:"related-faqs-3"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-can-i-run-tests-from-multiple-directories"},"How can I run tests from multiple directories?"))),(0,r.kt)("h2",{id:"knapsack_pro_test_dir-cucumber"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_DIR")," (Cucumber)"),(0,r.kt)("p",null,"Passed as-is to Cucumber's ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cucumber/cucumber-ruby/blob/5220e53d91d5fb0dbca2eea1e650b54a83743a0c/lib/cucumber/cli/options.rb#L345"},(0,r.kt)("inlineCode",{parentName:"a"},"--require")),"."),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"features")),(0,r.kt)("p",null,"Available: any folder or file relative to the root of your project"),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'KNAPSACK_PRO_TEST_DIR="features/support/cucumber_config.rb"\n')),(0,r.kt)("h3",{id:"related-faqs-4"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-require-different-cucumber-config-files-in-isolation"},"How to require different Cucumber config files in isolation?"))),(0,r.kt)("h2",{id:"knapsack_pro_test_file_exclude_pattern"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN")),(0,r.kt)("p",null,"Exclude tests matching a pattern. It can be used in tandem with ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_PATTERN"),"."),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"nil")),(0,r.kt)("p",null,"Available: anything that ",(0,r.kt)("a",{parentName:"p",href:"https://ruby-doc.org/core-3.0.0/Dir.html#method-c-glob"},"Dir.glob")," accepts"),(0,r.kt)("p",null,"Hint: you can debug ",(0,r.kt)("inlineCode",{parentName:"p"},"Dir.glob(MY_GLOB)")," in irb or rails console"),(0,r.kt)("p",null,"Examples:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN="spec/features/**{,/*/**}/*_spec.rb"\n\nKNAPSACK_PRO_TEST_FILE_PATTERN="spec/controllers/**{,/*/**}/*_spec.rb" \\\nKNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN="spec/controllers/admin/**{,/*/**}/*_spec.rb"\n')),(0,r.kt)("h3",{id:"related-faqs-5"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-exclude-tests-from-running-them"},"How to exclude tests?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/dir-glob-pattern-examples-for-knapsack_pro_test_file_pattern-and-knapsack_pro_test_file_exclude_pattern"},"Dir.glob pattern examples for ",(0,r.kt)("inlineCode",{parentName:"a"},"KNAPSACK_PRO_TEST_FILE_PATTERN")," and ",(0,r.kt)("inlineCode",{parentName:"a"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN")))),(0,r.kt)("h2",{id:"knapsack_pro_test_file_list"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_FILE_LIST")),(0,r.kt)("p",null,"Comma-separated list of tests to run. When ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_LIST")," is set, both ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_PATTERN")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN")," are ignored."),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"nil")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"KNAPSACK_PRO_TEST_FILE_LIST=spec/features/dashboard_spec.rb,spec/models/user.rb:10,spec/models/user.rb:29\n")),(0,r.kt)("h3",{id:"related-faqs-6"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-run-a-specific-list-of-test-files-or-only-some-tests-from-test-file"},"How to run a specific list of test files or only some tests from test file?"))),(0,r.kt)("h2",{id:"knapsack_pro_test_file_list_source_file"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_TEST_FILE_LIST_SOURCE_FILE")),(0,r.kt)("p",null,"File containing the list of tests to run. When ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_LIST_SOURCE_FILE")," is set, both ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_PATTERN")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"KNAPSACK_PRO_TEST_FILE_EXCLUDE_PATTERN")," are ignored."),(0,r.kt)("p",null,"Default: ",(0,r.kt)("inlineCode",{parentName:"p"},"nil")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"KNAPSACK_PRO_TEST_FILE_LIST_SOURCE_FILE=spec/fixtures/list.txt\n\n# list.txt\n./spec/test1_spec.rb\nspec/test2_spec.rb[1]\n./spec/test3_spec.rb[1:2:3:4]\n./spec/test4_spec.rb:4\n./spec/test4_spec.rb:5\n")),(0,r.kt)("h3",{id:"related-faqs-7"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-run-a-specific-list-of-test-files-or-only-some-tests-from-test-file"},"How to run a specific list of test files or only some tests from test file?"))),(0,r.kt)("h2",{id:"knapsack_pro_rspec_split_by_test_examples-rspec"},(0,r.kt)("inlineCode",{parentName:"h2"},"KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES")," (RSpec)"),(0,r.kt)("p",null,"Parallelize test examples (instead of files) across CI nodes."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Requires RSpec >= 3.3.0"),(0,r.kt)("li",{parentName:"ul"},"Does not support ",(0,r.kt)("inlineCode",{parentName:"li"},"run_all_when_everything_filtered")),(0,r.kt)("li",{parentName:"ul"},"Does not support ",(0,r.kt)("inlineCode",{parentName:"li"},"--tag")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"KNAPSACK_PRO_RSPEC_SPLIT_BY_TEST_EXAMPLES=true\n")),(0,r.kt)("p",null,"Make sure to read the details in the ",(0,r.kt)("a",{parentName:"p",href:"/ruby/rspec/#parallelize-test-examples-instead-of-files"},"RSpec guide"),"."),(0,r.kt)("h3",{id:"related-faqs-8"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-split-slow-rspec-test-files-by-test-examples-by-individual-it#warning-dont-use-deprecated-rspec-run_all_when_everything_filtered-option"},"How to split slow RSpec test files by test examples (by individual it)?"))))}u.isMDXComponent=!0}}]);