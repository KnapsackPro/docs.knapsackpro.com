"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[813],{3905:(e,n,o)=>{o.d(n,{Zo:()=>u,kt:()=>d});var t=o(7294);function r(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function a(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function l(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?a(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function p(e,n){if(null==e)return{};var o,t,r=function(e,n){if(null==e)return{};var o,t,r={},a=Object.keys(e);for(t=0;t<a.length;t++)o=a[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)o=a[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=t.createContext({}),s=function(e){var n=t.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):l(l({},n),e)),o},u=function(e){var n=s(e.components);return t.createElement(c.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},k=t.forwardRef((function(e,n){var o=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),k=s(o),d=r,f=k["".concat(c,".").concat(d)]||k[d]||i[d]||a;return o?t.createElement(f,l(l({ref:n},u),{},{components:o})):t.createElement(f,l({ref:n},u))}));function d(e,n){var o=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=o.length,l=new Array(a);l[0]=k;var p={};for(var c in n)hasOwnProperty.call(n,c)&&(p[c]=n[c]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var s=2;s<a;s++)l[s]=o[s];return t.createElement.apply(null,l)}return t.createElement.apply(null,o)}k.displayName="MDXCreateElement"},1280:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>i,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var t=o(7462),r=(o(7294),o(3905));const a={pagination_next:null,pagination_prev:null},l="Cookbook",p={unversionedId:"ruby/cookbook",id:"ruby/cookbook",title:"Cookbook",description:"Run Knapsack Pro on a subset of parallel CI nodes (instead of all)",source:"@site/docs/ruby/cookbook.md",sourceDirName:"ruby",slug:"/ruby/cookbook",permalink:"/ruby/cookbook",draft:!1,editUrl:"https://github.com/KnapsackPro/docs.knapsackpro.com/tree/main/docusaurus/docs/ruby/cookbook.md",tags:[],version:"current",frontMatter:{pagination_next:null,pagination_prev:null}},c={},s=[{value:"Run Knapsack Pro on a subset of parallel CI nodes (instead of all)",id:"run-knapsack-pro-on-a-subset-of-parallel-ci-nodes-instead-of-all",level:2},{value:"Related FAQs",id:"related-faqs",level:2}],u={toc:s};function i(e){let{components:n,...o}=e;return(0,r.kt)("wrapper",(0,t.Z)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"cookbook"},"Cookbook"),(0,r.kt)("h2",{id:"run-knapsack-pro-on-a-subset-of-parallel-ci-nodes-instead-of-all"},"Run Knapsack Pro on a subset of parallel CI nodes (instead of all)"),(0,r.kt)("p",null,"You may want to run Knapsack Pro only on a subset of parallel CI nodes, and use the others nodes for something else (e.g., linters)."),(0,r.kt)("p",null,"For example, you could decide to run Knapsack Pro on all the CI nodes but the last one:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"KNAPSACK_PRO_CI_NODE_TOTAL=$((MY_CI_NODE_TOTAL-1)) bundle exec rake knapsack_pro:queue:rspec\n")),(0,r.kt)("p",null,"To find out which environment variable to use in place of ",(0,r.kt)("inlineCode",{parentName:"p"},"MY_CI_NODE_TOTAL"),", take a look at what Knapsack Pro uses as ",(0,r.kt)("inlineCode",{parentName:"p"},"node_total")," for your ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/KnapsackPro/knapsack_pro-ruby/tree/master/lib/knapsack_pro/config/ci"},"CI provider")," (e.g., for CircleCI it would be ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/KnapsackPro/knapsack_pro-ruby/blob/master/lib/knapsack_pro/config/ci/circle.rb#L6"},(0,r.kt)("inlineCode",{parentName:"a"},"CIRCLE_NODE_TOTAL")),")"),(0,r.kt)("h2",{id:"related-faqs"},"Related FAQs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://knapsackpro.com/faq/question/how-to-run-knapsack_pro-only-on-a-few-parallel-ci-nodes-instead-of-all"},"How to run ",(0,r.kt)("inlineCode",{parentName:"a"},"knapsack_pro")," only on a few parallel CI nodes instead of all?"))))}i.isMDXComponent=!0}}]);