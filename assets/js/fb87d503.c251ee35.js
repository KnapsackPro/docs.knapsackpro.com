"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[531],{3031:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>k,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var s=a(7462),n=a(7294),o=a(3905),r=a(8777);const l=e=>{let{srcs:t}=e;return n.createElement(r.sj,{naturalSlideWidth:16,naturalSlideHeight:9,totalSlides:t.length},n.createElement(r.iR,null,t.map(((e,t)=>n.createElement(r.Mi,{index:t},n.createElement(r.Gy,{src:e,style:{objectFit:"contain"}}))))),n.createElement(r.jp,null,"Back"),n.createElement(r.P1,null,"Next"))},i={pagination_next:"integration",pagination_prev:null},u="Overview",p={unversionedId:"overview/index",id:"overview/index",title:"Overview",description:"Knapsack Pro wraps your current test runner(s) and works with your existing CI infrastructure to parallelize tests optimally:",source:"@site/docs/overview/index.md",sourceDirName:"overview",slug:"/overview/",permalink:"/overview/",draft:!1,editUrl:"https://github.com/KnapsackPro/docs.knapsackpro.com/tree/main/docusaurus/docs/overview/index.md",tags:[],version:"current",frontMatter:{pagination_next:"integration",pagination_prev:null},next:{title:"Integration",permalink:"/integration"}},d={},c=[{value:"Components",id:"components",level:2},{value:"Knapsack Pro API",id:"knapsack-pro-api",level:3},{value:"Knapsack Pro Client",id:"knapsack-pro-client",level:3},{value:"Dashboard",id:"dashboard",level:3},{value:"Tests Orchestration Modes",id:"tests-orchestration-modes",level:2},{value:"Queue Mode (Dynamic Split)",id:"queue-mode-dynamic-split",level:3},{value:"Regular Mode (Static Split)",id:"regular-mode-static-split",level:3},{value:"Fallback Mode",id:"fallback-mode",level:3},{value:"Customer Support",id:"customer-support",level:2}],m={toc:c};function k(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,s.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"overview"},"Overview"),(0,o.kt)("p",null,"Knapsack Pro wraps your current test runner(s) and works with your existing CI infrastructure to parallelize tests optimally:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Dynamically splits your tests based on up-to-date test execution data"),(0,o.kt)("li",{parentName:"ul"},"Is designed from the ground up for CI and supports all of them"),(0,o.kt)("li",{parentName:"ul"},"Tracks your CI builds to detect bottlenecks"),(0,o.kt)("li",{parentName:"ul"},"Does not have access to your source code and collects minimal test data (with opt-in encryption)"),(0,o.kt)("li",{parentName:"ul"},"Enables you to export historical metrics about your CI builds"),(0,o.kt)("li",{parentName:"ul"},"Supports out-of-the-box any Ruby test runners, Cypress, Jest (and provides both SDK and API to integrate with any other language)"),(0,o.kt)("li",{parentName:"ul"},"Replaces local dependencies like Redis with an API and runs your tests regardless of network problems")),(0,o.kt)("div",{className:"center w-full"},(0,o.kt)("img",{width:"800",height:"800",src:"/img/architecture.svg"})),(0,o.kt)("h2",{id:"components"},"Components"),(0,o.kt)("h3",{id:"knapsack-pro-api"},"Knapsack Pro API"),(0,o.kt)("p",null,"The Knapsack Pro API splits test files between parallel CI nodes based on the test execution time of your preview CI runs. See ",(0,o.kt)("a",{parentName:"p",href:"#tests-orchestration-modes"},"Test Orchestration Modes")," below for more information."),(0,o.kt)("h3",{id:"knapsack-pro-client"},"Knapsack Pro Client"),(0,o.kt)("p",null,"The Knapsack Pro Client is a library to install in your project that wraps your current test runners/frameworks. It connects with the Knapsack Pro API to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Retrieve the list of tests to run for the current parallel CI node"),(0,o.kt)("li",{parentName:"ul"},"Record the test execution time, including additional information from the CI environment variables:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Commit hash"),(0,o.kt)("li",{parentName:"ul"},"Branch name"),(0,o.kt)("li",{parentName:"ul"},"Number of parallel CI nodes"),(0,o.kt)("li",{parentName:"ul"},"CI node index")))),(0,o.kt)("h3",{id:"dashboard"},"Dashboard"),(0,o.kt)("p",null,"Knapsack Pro comes with a web UI that displays graphs and stats about your test runs:"),(0,o.kt)(l,{srcs:["/img/dashboard-ci-nodes-graph.png","/img/dashboard-ci-nodes-table.png","/img/dashboard-monthly-ci-builds.png","/img/dashboard-test-file-history.png","/img/dashboard-test-files.png"],mdxType:"Carousel"}),(0,o.kt)("h2",{id:"tests-orchestration-modes"},"Tests Orchestration Modes"),(0,o.kt)("h3",{id:"queue-mode-dynamic-split"},"Queue Mode (Dynamic Split)"),(0,o.kt)("p",null,"Knapsack Pro splits your tests dynamically (Queue Mode) between parallel CI nodes."),(0,o.kt)("p",null,"Each Knapsack Pro Client (parallel CI node):"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Retrieves from the Knapsack Pro API a subset of tests to execute"),(0,o.kt)("li",{parentName:"ol"},"Runs those tests"),(0,o.kt)("li",{parentName:"ol"},"Repeats 1. and 2. as long as there are more tests in the API queue"),(0,o.kt)("li",{parentName:"ol"},"Sends the test execution times to the API for the subsequent CI runs")),(0,o.kt)("p",null,"With Queue Mode, Knapsack Pro distributes tests so that each CI node finishes at the same time. Thanks to that, your CI build time is as fast as possible."),(0,o.kt)("p",null,"Knapsack Pro allows distributing the tests in a static way too, but it\u2019s not always a good solution:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Tests themselves, especially end to end, have varying execution times"),(0,o.kt)("li",{parentName:"ul"},"Failing tests execute faster than green ones"),(0,o.kt)("li",{parentName:"ul"},"CI nodes may differ in hardware/performance"),(0,o.kt)("li",{parentName:"ul"},"CI nodes boot at different times"),(0,o.kt)("li",{parentName:"ul"},"CI nodes are more or less busy when the environment is shared/virtualized"),(0,o.kt)("li",{parentName:"ul"},"CI nodes may load their caches at dissimilar times"),(0,o.kt)("li",{parentName:"ul"},"Test execution starts at different times on different CI nodes"),(0,o.kt)("li",{parentName:"ul"},"Flaky tests are.. Well, flaky!")),(0,o.kt)("h3",{id:"regular-mode-static-split"},"Regular Mode (Static Split)"),(0,o.kt)("p",null,"Even if Queue Mode is recommended, Knapsack Pro supports a static split of tests between parallel CI nodes (Regular Mode)."),(0,o.kt)("p",null,"In this mode, the Knapsack Pro API returns to each Knapsack Pro client the subset of tests to execute in one batch."),(0,o.kt)("p",null,"However, as explained in the ",(0,o.kt)("a",{parentName:"p",href:"#queue-mode-dynamic-split"},"Queue Mode")," section, this will result in a suboptimal split."),(0,o.kt)("h3",{id:"fallback-mode"},"Fallback Mode"),(0,o.kt)("p",null,"In case of network issues, Knapsack Pro automatically switches to Fallback Mode and runs your tests with a split based on test file names."),(0,o.kt)("h2",{id:"customer-support"},"Customer Support"),(0,o.kt)("p",null,"If you have questions, feel free to ",(0,o.kt)("a",{parentName:"p",href:"https://knapsackpro.com/contact"},"contact us")," directly and we will be happy to help."))}k.isMDXComponent=!0}}]);